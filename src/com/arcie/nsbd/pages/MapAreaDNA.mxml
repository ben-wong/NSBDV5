<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
         xmlns:s="library://ns.adobe.com/flex/spark"
         xmlns:esri="http://www.esri.com/2008/ags"
         xmlns:layers="com.arcie.nsbd.layers.*"
         creationComplete="MapCreateComplete()">

    <fx:Script>
		<![CDATA[
        //地图初始化
        private function MapCreateComplete():void {

        }
        ]]>
	</fx:Script>

    <esri:Map id="mainMap"
              logoVisible="false"
              zoomSliderVisible="false">

        <!-- 调用TDT_MapServiceLayer加载天地图提供的瓦片图层，依次加载底图和地名层 -->
        <layers:TDT_MapServiceLayer id="baseMap_wmt"
                                    baseURL="http://t0.tianditu.com/vec_c"
                                    serviceMode="KVP"
                                    imageFormat="tiles"
                                    tileMatrixSetId="c"
                                    layerId="vec"
                                    visible="{btnBaseMaps.selectedIndex == 0}"/>

        <layers:TDT_MapServiceLayer id="PlaceName_cva"
                                    baseURL="http://t0.tianditu.com/cva_c"
                                    serviceMode="KVP"
                                    imageFormat="tiles"
                                    tileMatrixSetId="c"
                                    layerId="cva"
                                    visible="{btnBaseMaps.selectedIndex == 0}"/>

        <layers:TDT_MapServiceLayer id="baseMap_img"
                                    baseURL="http://t0.tianditu.com/img_c"
                                    serviceMode="KVP"
                                    imageFormat="tiles"
                                    tileMatrixSetId="c"
                                    layerId="img"
                                    visible="{btnBaseMaps.selectedIndex == 1}"/>
        <layers:TDT_MapServiceLayer id="PlaceName_cia"
                                    baseURL="http://t0.tianditu.com/cia_c"
                                    serviceMode="KVP"
                                    imageFormat="tiles"
                                    tileMatrixSetId="c"
                                    layerId="cia"
                                    visible="{btnBaseMaps.selectedIndex == 1}"/>

        <layers:TDT_MapServiceLayer id="baseMap_ter"
                                    baseURL="http://t0.tianditu.com/ter_c"
                                    serviceMode="KVP"
                                    imageFormat="tiles"
                                    tileMatrixSetId="c"
                                    layerId="ter"
                                    visible="{btnBaseMaps.selectedIndex == 2}"/>

        <layers:TDT_MapServiceLayer id="PlaceName_cta"
                                    baseURL="http://t0.tianditu.com/cta_c"
                                    serviceMode="KVP"
                                    imageFormat="tiles"
                                    tileMatrixSetId="c"
                                    layerId="cta"
                                    visible="{btnBaseMaps.selectedIndex == 2}"/>

        <!-- 调用ArcGISDynamicMapServiceLayer加载ArcGIS Server发布的河流水系矢量图层 -->
        <esri:ArcGISDynamicMapServiceLayer id="mapServer"
                                           url="http://win-w15vzfmyjy7:8399/arcgis/rest/services/ReservoirAreaDNA/MapServer"/>

        <esri:GraphicsLayer id="identifyGraphicsLayer"/>


    </esri:Map>

    <!-- 顶部切换天地图底图的按钮组  -->
    <s:ButtonBar id="btnBaseMaps"
                 left="40" top="5"
                 requireSelection="true">
        <s:dataProvider>
            <s:ArrayList>
                <fx:String>矢量图</fx:String>
                <fx:String>影像图</fx:String>
                <fx:String>地形图</fx:String>
            </s:ArrayList>
        </s:dataProvider>
    </s:ButtonBar>


</s:Group>
